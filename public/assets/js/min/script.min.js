!function(e){e.fn.CherryLikes=function(a){function n(a,n){var t=e("#"+n+"-"+a+" a");if(!t.length)return!1;if(!t.hasClass(s.done_class))return!1;var r=parseInt(t.text());return 0==r?!1:(r-=1,void t.removeClass(s.done_class).text(r))}var s={action:"like",done_class:"action-done"};return a&&e.extend(s,a),this.bind("click",function(a){a.preventDefault();var t=e(this),r=t.data("post"),i=t.hasClass(s.done_class),o="dislike";return"dislike"==s.action&&(o="like"),t.hasClass("processing")?!1:(t.addClass("processing"),void e.ajax({url:cherry_rank.ajaxurl,type:"post",dataType:"html",data:{action:"cherry_handle_"+s.action,post:r,done:i,nonce:cherry_rank.nonce}}).done(function(e){t.removeClass("processing").html(e),0==i?(t.addClass(s.done_class),n(r,o)):t.removeClass(s.done_class)}))}),this}}(jQuery),jQuery(document).ready(function(e){e(document).on("click",".star-rating_item",function(a){a.preventDefault();var n=e(this),s=n.parent(),t=n.data("rate"),r=s.data("post");return s.hasClass("processing")||s.hasClass("rate-disabled")?!1:(s.addClass("processing"),void e.ajax({url:cherry_rank.ajaxurl,type:"post",dataType:"html",data:{action:"cherry_handle_rating",rate:t,post:r,nonce:cherry_rank.nonce}}).done(function(e){s.removeClass("processing"),s.parent().html(e)}))}),e(".meta-rank-like-this").CherryLikes({action:"like"}),e(".meta-rank-dislike-this").CherryLikes({action:"dislike"})});